<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title> {% block title_block %} {% endblock %} </title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    {% block styles %} {% endblock %}
    <style>
        body {
            margin: 0;
            font-family: 'Poppins', sans-serif !important;
        }


        .navbar {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 10px 20px;
            background-color: white;
            border-bottom: 1px solid #ddd;
        }

        .navbar-nav .nav-link {
            font-size: 14px;
            font-weight: bold;
            color: black;
        }

        .navbar-nav .nav-link:hover {
            text-decoration: none;
            scale: 1.01;
            transition: scale 0.3s ease-in-out;
        }

        .logo img {
            height: 40px;
            margin-left: 2vw;
        }

        .nav-links {
            display: flex;
            gap: 20px;
        }

        .nav-links a {
            text-decoration: none;
            color: black;
            font-size: 14px;
            font-weight: bold;
        }

        .nav-links a:hover {
            text-decoration: underline;

        }

        .clearance {
            color: red;
        }

        /* Header Icons */
        .icons {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        /* Search Box */
        .search-box {
            display: flex;
            align-items: center;
            border: 1px solid #ddd;
            border-radius: 20px;
            overflow: hidden;
            background-color: white;
        }

        .search-box input {
            border: none;
            padding: 5px 10px;
            outline: none !important;
            width: 150px;
            box-shadow: none !important;
        }

        .search-box button {
            background: none;
            border: none;
            padding: 5px 10px;
            cursor: pointer;
        }

        .search-box button i {
            color: black;
        }

        /* User Profile Icon */
        .user-profile,
        .cart {
            font-size: 18px;
            cursor: pointer;
        }

        .cart:hover {
            font-size: 22px;
            cursor: pointer;
        }

        .user-profile:hover {
            font-size: 22px;
            cursor: pointer;
        }

        .cart .badge {
            position: absolute;
            top: -5px;
            right: -10px;
            background-color: red;
            color: white;
            font-size: 12px;
            width: 18px;
            height: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
        }



        footer {
            background-color: black;
            color: white;
            padding: 20px 0;

        }

        .footer-container {
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
            padding: 10px;
        }

        .footer-container div {
            flex: 1;
            min-width: 200px;
            margin: 10px;
        }

        .footer-container h3 {
            margin-bottom: 25px;
        }

        ul {
            list-style: none;
            padding: 0;

        }

        ul li {
            margin: 5px 0;

        }

        ul li a {
            color: white;
            text-decoration: none;
        }

        ul li a:hover {
            color: red;
            transition: color 0.3s ease;

        }

        #box {
            background-color: transparent;
            border: none;
            border-bottom: 2px solid red;
            padding: 10px;
            width: 250px;
            font-size: 16px;
            color: white;
            outline: none;
            margin-bottom: 5px;
        }

        #box::placeholder {
            color: rgba(255, 255, 255, 0.7);
        }

        .newsletter button {
            padding: 10px 15px;
            background: none;
            /* No background */
            color: white;
            /* Button text color */
            border: none;
            font-size: 16px;
            cursor: pointer;
            font-weight: bold;
            transition: color 0.3s ease;
        }

        .newsletter button:hover {
            color: red;
        }

        /* Social Icons Container */
        .social-icons {
            margin-top: 35px;
            display: flex;
            justify-content: start;
            gap: 20px;
        }

        /* Social Media Icons */
        .social-icons a {
            color: white;
            font-size: 22px;
            transition: color 0.3s ease;
        }

        /* Hover Effects - Theme Matching */
        .social-icons a:hover {
            color: red;
            transition: color 0.3s ease;

        }

        .location {
            font-size: 18px;
            cursor: pointer;
        }

        .location:hover {
            font-size: 22px;
        }

        .user-profile {
            position: relative;
            display: inline-block;
        }

        .user-profile .dropdown-content {
            display: none;
            position: absolute;
            right: 0;
            background-color: white;
            min-width: 200px;
            box-shadow: 0px 8px 16px rgba(0, 0, 0, 0.1);
            z-index: 1;
            padding: 10px;
            border-radius: 5px;
        }

        .user-profile:hover .dropdown-content {
            display: block;
        }

        .dropdown-content a {
            color: black;
            padding: 8px 12px;
            text-decoration: none;
            display: block;
            font-size: 14px;
        }

        .dropdown-content a:hover {
            background-color: #f1f1f1;
        }

        .dropdown-content .user-details {
            padding: 8px 12px;
            font-size: 14px;
            color: #333;
        }

        .dropdown-content .logout-btn {
            color: red;
            font-weight: bold;
        }

        .location {
            position: relative;
            display: inline-block;
        }

        .location .tooltip {
            visibility: hidden;
            width: 200px;
            background-color: white;
            color: black;
            text-align: left;
            border-radius: 5px;
            padding: 15px;
            position: absolute;
            z-index: 1;
            top: 100%;
            /* Position above the icon */
            left: 50%;
            margin-left: -100px;
            opacity: 0;
            transition: opacity 0.3s;
        }

        .location:hover .tooltip {
            visibility: visible;
            opacity: 1;
        }

        .decor,
        .update {
            text-decoration: none;
            color: green;
            font-weight: bold;
        }

        .fa-shopping-cart {
            font-size: 1.2rem;
            position: relative;
        }

        #cart-count {
            position: absolute;
            top: -10px;
            right: -10px;
            font-size: 0.8rem;
        }

        .cart-icon {
            position: relative;
            display: inline-block;
            margin-left: 10px;
        }
        
        .cart-icon a {
            text-decoration: none;
        }
        
        .cart-icon i {
            transition: font-size 0.3s ease;
        }
        
        .cart-icon:hover i {
            font-size: 22px !important;
        }
        
        .cart-badge {
            position: absolute;
            top: -8px;
            right: -8px;
            font-size: 0.7rem;
            padding: 0.25em 0.6em;
        }
    </style>
</head>

<body>
    {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
    {% for category, message in messages %}
    <div class="alert alert-{{ category }} alert-dismissible fade show" role="alert">
        {{ message }}
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>
    {% endfor %}
    {% endif %}
    {% endwith %}
    <header class="bg-white border-bottom">
        <nav class="navbar navbar-expand-lg container">
            <!-- Existing navbar content -->
            <a class="navbar-brand" href="{{url_for('index')}}">
                <img src="{{ url_for('static', filename='images/logo.png') }}" alt="Logo" height="40">
            </a>

            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>

            <div class="collapse navbar-collapse justify-content-center" id="navbarNav">
                <ul class="navbar-nav">
                    <li class="nav-item"><a class="nav-link" href="{{url_for('index')}}">HOME</a></li>
                    <li class="nav-item"><a class="nav-link" href="{{url_for('about')}}">ABOUT US</a></li>
                    <li class="nav-item"><a class="nav-link" href="#contact">CONTACT</a></li>
                    <li class="nav-item"><a class="nav-link" href="{{url_for('privacyPolicy')}}">PRIVACY POLICY</a></li>
                    <li class="nav-item"><a class="nav-link" href="{{url_for('csr')}}">CSR POLICY</a></li>
                    <li class="nav-item"><a class="nav-link" href="{{url_for('tc')}}">T&C</a></li>
                    <li class="nav-item"><a class="nav-link text-danger" href="{{url_for('order_history')}}">MY ORDERS</a></li>
                    <li class="nav-item"><a class="nav-link" href="{{url_for('blogs')}}">BLOGS</a></li>
                </ul>
            </div>

            <!-- Search, Location, Profile, and Cart -->
            <div class="d-flex align-items-center gap-3">
                <div class="search-box d-none d-md-flex">
                    <form action="{{ url_for('search') }}" method="GET" style="display: flex;">
                        <input type="text" class="form-control" name="query" placeholder="Search...">
                        <button type="submit" class="btn"><i class="fas fa-search"></i></button>
                    </form>
                </div>


                <div class="location">
                    <i class="fas fa-map-marker-alt fs-5" data-bs-toggle="modal" data-bs-target="#addressModal"></i>
                    <div class="tooltip">
                        {% if address %}
                        {{ address.house_street }}, {{ address.landmark }}, {{ address.pincode }}, {{ address.state
                        }}
                        <br><br>
                        <a href="#" data-bs-toggle="modal" data-bs-target="#updateaddressModal"
                            class="update">Update</a>
                        {% else %}
                        <a href="#" data-bs-toggle="modal" data-bs-target="#addressModal" class="decor">Save Address</a>
                        {% endif %}
                    </div>
                </div>

                <!-- User Profile Icon with Hoverable Dropdown -->
                <div class="user-profile">
                    <i class="fas fa-user fs-5"></i>
                    <div class="dropdown-content">
                        {% if current_user.is_authenticated %}

                        <div class="user-details">
                            <strong>{{ current_user.name }}</strong><br>
                            {{ current_user.email }}<br>
                            {{ current_user.phone_number }}
                        </div>
                        <a href="#" data-bs-toggle="modal" data-bs-target="#updateUserModal">Update</a>
                        <a href="{{ url_for('logout') }}" class="logout-btn">Logout</a>
                        {% else %}
                        <!-- Show login and signup options -->
                        <a href="#" data-bs-toggle="modal" data-bs-target="#loginModal">Login</a>
                        <a href="#" data-bs-toggle="modal" data-bs-target="#signupModal">Sign Up</a>
                        {% endif %}
                    </div>
                </div>

                <!-- Cart Icon -->
                <div class="cart-icon">
                    <a href="{{ url_for('cart') }}" class="text-dark">
                        <i class="fas fa-shopping-cart fs-5"></i>
                        <span class="badge bg-danger rounded-pill cart-badge">{{ cart_count }}</span>
                    </a>
                </div>
            </div>
        </nav>
    </header>

    <main>
        {% block main_block %}
        {% endblock %}
    </main>

    <footer>
        <!-- Existing footer content -->
        <div class="footer-container">
            <div class="newsletter">
                <h3>#MoveUp by signing up</h3>
                <form action="{{url_for('subscribe')}}">
                    <input type="email" placeholder="Your email address" id="box" required>
                    <button type="submit">SEND</button>
                </form>
                <!-- Social Icons -->
                <div class="social-icons">
                    <a href="#" class="social-link"><i class="fab fa-facebook-f"></i></a>
                    <a href="#" class="social-link"><i class="fab fa-instagram"></i></a>
                    <a href="#" class="social-link"><i class="fab fa-youtube"></i></a>
                    <a href="#" class="social-link"><i class="fab fa-x-twitter"></i></a>
                </div><br>

                <p>Join our newsletter for special deals, promotions, and more!</p>
            </div>
            <div class="company-info">
                <h3>COMPANY INFORMATION</h3>
                <ul>
                    <li><a href="{{url_for('about')}}">About Us</a></li>
                    <li><a href="{{url_for('tc')}}">Terms And Conditions</a></li>
                    <li><a href="{{url_for('privacyPolicy')}}">Privacy Policy</a></li>
                    <li><a href="{{url_for('exchangePolicy')}}">Exchange & Return Policy</a></li>
                    <li><a href="{{url_for('order_history')}}">MY ORDERS</a></li>
                    <li><a href="{{url_for('blogs')}}">Blogs</a></li>
                    <li><a href="{{url_for('csr')}}">CSR Policy</a></li>
                </ul>
            </div>

            <div class="connect" id="contact">
                <h3>CONNECT WITH US</h3>
                <p><a href="mailto:ishardeep3195.beai24@chitkara.edu.in">ishardeep3195.beai24@chitkara.edu.in</a></p>
                <p>(Mon-Fri, 10:00am till 10:00pm)</p>
                <p>This website is a prototype developed to hone our skills. For copyright or legal inquiries, please
                    contact us above.</p>
            </div>


        </div>
    </footer>
    <!-- Login Modal -->
    <div class="modal fade" id="loginModal" tabindex="-1" aria-labelledby="loginModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="loginModalLabel">LOGIN</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form action="{{ url_for('login') }}" method="POST">
                        <div class="mb-3">
                            <input type="email" class="form-control" name="email" placeholder="Email *" required>
                        </div>
                        <div class="mb-3">
                            <input type="password" class="form-control" name="password" placeholder="Password *"
                                minlength="8" required>
                        </div>
                        <button type="submit" class="btn btn-dark w-100">Sign In</button>
                    </form>
                    <p class="mt-3 text-center">
                        New customer? <a href="#" data-bs-toggle="modal" data-bs-target="#signupModal"
                            data-bs-dismiss="modal">Create your account</a>
                    </p>
                    <p class="text-center">
                        Lost password? <a href="#">Recover password</a>
                    </p>
                </div>
            </div>
        </div>
    </div>

    <!-- Signup Modal -->
    <div class="modal fade" id="signupModal" tabindex="-1" aria-labelledby="signupModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="signupModalLabel">REGISTER</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form action="{{ url_for('signup') }}" method="POST">
                        <div class="mb-3">
                            <input type="text" class="form-control" name="name" placeholder="Name" required>
                        </div>
                        <div class="mb-3">
                            <input type="text" class="form-control" name="phoneNumber" placeholder="Phone Number" maxlength="10"
                                required>
                        </div>
                        <div class="mb-3">
                            <input type="email" class="form-control" name="email" placeholder="Email *" required>
                        </div>
                        <div class="mb-3">
                            <input type="password" class="form-control" name="password" placeholder="Password *"
                                minlength="8" required>
                        </div>
                        <button type="submit" class="btn btn-dark w-100">Register</button>
                    </form>
                    <p class="mt-3 text-center">
                        Already have an account? <a href="{{url_for('login')}}" data-bs-toggle="modal" data-bs-target="#loginModal"
                            data-bs-dismiss="modal">Login here</a>
                    </p>
                </div>
            </div>
        </div>
    </div>
    <!-- Update User Modal -->
    <div class="modal fade" id="updateUserModal" tabindex="-1" aria-labelledby="updateUserModalLabel"
        aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="updateUserModalLabel">Update Information</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form action="{{ url_for('update_user') }}" method="POST">
                        <div class="mb-3">
                            <input type="text" class="form-control" name="name" value="{{ current_user.name }}"
                                required>
                        </div>
                        <div class="mb-3">
                            <input type="email" class="form-control" name="email" value="{{ current_user.email }}"
                                required>
                        </div>
                        <div class="mb-3">
                            <input type="text" class="form-control" name="phoneNumber"
                                value="{{ current_user.phone_number }}" required>
                        </div>
                        <button type="submit" class="btn btn-dark w-100">Update</button>
                    </form>
                </div>
            </div>
        </div>
    </div> <!-- Address Modal -->
    <div class="modal fade" id="addressModal" tabindex="-1" aria-labelledby="addressModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="addressModalLabel">Enter Address</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form action="{{ url_for('save_address') }}" method="POST">
                        <div class="mb-3">
                            <input type="text" class="form-control" name="house_street"
                                placeholder="House Number, Street Name" required>
                        </div>
                        <div class="mb-3">
                            <input type="text" class="form-control" name="landmark" placeholder="Landmark (Optional)">
                        </div>
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <input type="text" class="form-control" name="pincode" placeholder="Pincode" required>
                            </div>
                            <div class="col-md-6 mb-3">
                                <input type="text" class="form-control" name="state" placeholder="State" required>
                            </div>
                        </div>
                        <button type="submit" class="btn btn-dark w-100">Save Address</button>
                    </form>
                </div>
            </div>
        </div>
    </div>


    <div class="modal fade" id="updateaddressModal" tabindex="-1" aria-labelledby="updateaddressModalLabel"
        aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="updateaddressModalLabel">Enter Address</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form action="{{ url_for('update_address') }}" method="POST">
                        <div class="mb-3">
                            <input type="text" class="form-control" name="house_street"
                                value="{{ address.house_street if address else '' }}"
                                placeholder="House Number, Street Name" required>
                        </div>
                        <div class="mb-3">
                            <input type="text" class="form-control" name="landmark"
                                value="{{ address.landmark if address else '' }}" placeholder="Landmark (Optional)">
                        </div>
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <input type="text" class="form-control" name="pincode"
                                    value="{{ address.pincode if address else '' }}" placeholder="Pincode" required>
                            </div>
                            <div class="col-md-6 mb-3">
                                <input type="text" class="form-control" name="state"
                                    value="{{ address.state if address else '' }}" placeholder="State" required>
                            </div>
                        </div>
                        <button type="submit" class="btn btn-dark w-100">Update</button>
                    </form>


                </div>


            </div>



            <!-- Bootstrap JS -->
            <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>